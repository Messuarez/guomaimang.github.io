<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.36" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://guomaimang.github.io/note/cs/co/Memory/Introduction-to-Computer-Memory-and-Cache-Memory.html"><meta property="og:site_name" content="å¼˜æ ‘"><meta property="og:title" content="Computer and Cache Memory"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:locale:alternate" content="en-US"><meta property="article:published_time" content="2021-05-01T00:00:00.000Z"><link rel="stylesheet" href="//at.alicdn.com/t/font_2410206_mfj6e1vbwo.css"><title>Computer and Cache Memory | å¼˜æ ‘</title><meta name="description" content="æœéº¦èŠ’ éŸ©ä½³æ˜ åšå®¢">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.6b60e16d.css">
    <link rel="modulepreload" href="/assets/app.e03d7337.js"><link rel="modulepreload" href="/assets/Introduction-to-Computer-Memory-and-Cache-Memory.html.968522b2.js"><link rel="modulepreload" href="/assets/Introduction-to-Computer-Memory-and-Cache-Memory.html.9a086de3.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc sidebar-open"><!--[--><header class="navbar"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><a href="/" class="home-link"><img class="logo" src="/logo.svg" alt="å¼˜æ ‘"><!----><span class="site-name hide-in-pad">å¼˜æ ‘</span><!--[--><!----><!--]--></a><nav class="nav-links" style=""><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" arialabel="åšå®¢ä¸»é¡µ"><i class="icon iconfont icon-home"></i>åšå®¢ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a href="https://hongshu.zxg.red" rel="noopener noreferrer" target="_blank" arialabel="Research" class="nav-link"><i class="icon iconfont icon-creative"></i>Research<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="nav-item hide-in-mobile"><a href="/myself.html" class="nav-link" arialabel="å…³äºæˆ‘"><i class="icon iconfont icon-profile"></i>å…³äºæˆ‘<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" arialabel="å­¦ä¹ ç¬”è®°"><span class="title"><i class="icon iconfont icon-note"></i>å­¦ä¹ ç¬”è®°</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Computer Science</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/cs/coding/" class="nav-link" arialabel="Programming"><i class="icon iconfont icon-c"></i>Programming<!----></a></li><li class="dropdown-subitem"><a href="/note/cs/co/" class="nav-link active" arialabel="Computer Organization"><i class="icon iconfont icon-workingDirectory"></i>Computer Organization<!----></a></li><li class="dropdown-subitem"><a href="/note/cs/os/" class="nav-link" arialabel="Operating System"><i class="icon iconfont icon-centos"></i>Operating System<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Data Science</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/ds/da/" class="nav-link" arialabel="Data Analysis"><i class="icon iconfont icon-rank"></i>Data Analysis<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>IT Management</span></h4><ul class="dropdown-subitem-wrapper"></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Mathematics</span></h4><ul class="dropdown-subitem-wrapper"></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Others</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/others/app/" class="nav-link" arialabel="Computer Application"><i class="icon iconfont icon-app"></i>Computer Application<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" arialabel="ä¼ é€é—¨"><span class="title"><i class="icon iconfont icon-launch"></i>ä¼ é€é—¨</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>APPS</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://app.hanjiaming.com.cn/unlock-music/" rel="noopener noreferrer" target="_blank" arialabel="Unlock-Music" class="nav-link"><i class="icon iconfont icon-command"></i>Unlock-Music<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Recommand</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.zhongxueguan.cn" rel="noopener noreferrer" target="_blank" arialabel="ä¸­å›½å­¦é¦†è”ç›Ÿ" class="nav-link"><!---->ä¸­å›½å­¦é¦†è”ç›Ÿ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" arialabel="æ ¡å›­"><span class="title"><i class="icon iconfont icon-study"></i>æ ¡å›­</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="http://www.hbhszx.cn" rel="noopener noreferrer" target="_blank" arialabel="æ²³åŒ—è¡¡æ°´ä¸­å­¦" class="nav-link"><!---->æ²³åŒ—è¡¡æ°´ä¸­å­¦<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://polyu.edu.hk" rel="noopener noreferrer" target="_blank" arialabel="é¦™æ¸¯ç†å·¥å¤§å­¦" class="nav-link"><!---->é¦™æ¸¯ç†å·¥å¤§å­¦<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://www.fudan.edu.cn" rel="noopener noreferrer" target="_blank" arialabel="å¤æ—¦å¤§å­¦" class="nav-link"><!---->å¤æ—¦å¤§å­¦<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" arialabel="æ›´å¤š"><span class="title"><i class="icon iconfont icon-categoryselected"></i>æ›´å¤š</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/#" class="nav-link" arialabel="Friend links"><!---->Friend links<!----></a></li><li class="dropdown-item"><a href="/#" class="nav-link" arialabel="Support"><!---->Support<!----></a></li></ul></button></div></div></nav><div class="nav-actions-wrapper"><!--[--><!----><!--]--><div class="nav-item"><div class="dropdown-wrapper i18n-dropdown"><button class="dropdown-title" type="button" arialabel="é€‰æ‹©è¯­è¨€"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon i18n-icon" viewbox="0 0 1024 1024" arialabelledby="i18n" style="width:1rem;height:1rem;vertical-align:middle;"><title id="i18n" lang="en">i18n icon</title><g fill="currentColor"><path d="M379.392 460.8 494.08 575.488l-42.496 102.4L307.2 532.48 138.24 701.44l-71.68-72.704L234.496 460.8l-45.056-45.056c-27.136-27.136-51.2-66.56-66.56-108.544h112.64c7.68 14.336 16.896 27.136 26.112 35.84l45.568 46.08 45.056-45.056C382.976 312.32 409.6 247.808 409.6 204.8H0V102.4h256V0h102.4v102.4h256v102.4H512c0 70.144-37.888 161.28-87.04 210.944L378.88 460.8zM576 870.4 512 1024H409.6l256-614.4H768l256 614.4H921.6l-64-153.6H576zM618.496 768h196.608L716.8 532.48 618.496 768z"></path></g></svg><!--]--><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-current="page" href="/note/cs/co/Memory/Introduction-to-Computer-Memory-and-Cache-Memory.html" class="router-link-active router-link-exact-active nav-link active" arialabel="ç®€ä½“ä¸­æ–‡"><!---->ç®€ä½“ä¸­æ–‡<!----></a></li><li class="dropdown-item"><a href="/en/" class="nav-link" arialabel="English"><!---->English<!----></a></li></ul></button></div></div><div class="nav-item"><a class="repo-link" href="https://github.com/guomaimang/guomaimang.github.io" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" arialabelledby="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><title id="github" lang="en">github icon</title><g fill="currentColor"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></g></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewbox="0 0 1024 1024" arialabelledby="outlook"><title id="outlook" lang="en">outlook icon</title><g fill="currentColor"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></g></svg><div class="outlook-dropdown"><!----></div></button></div><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button><!--[--><!----><!--]--></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/note/cs/co/" class="nav-link sidebar-link sidebar-page" arialabel="Computer Organization"><!---->Computer Organization<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/note/cs/co/module-function.html" class="nav-link sidebar-link sidebar-page" arialabel="Components &amp; Interconnects"><!---->Components &amp; Interconnects<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Combinational Logic</span><span class="arrow right"></span></button><!--[--><!--[--><!----><!--]--><!----><!--]--></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Digital System</span><span class="arrow right"></span></button><!--[--><!--[--><!----><!--]--><!----><!--]--></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><!----><span class="title">Memory</span><span class="arrow down"></span></button><!--[--><!--[--><ul class="sidebar-links"><li><!--[--><a aria-current="page" href="/note/cs/co/Memory/Introduction-to-Computer-Memory-and-Cache-Memory.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" arialabel="Computer and Cache Memory"><!---->Computer and Cache Memory<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/note/cs/co/Memory/Internal-Memory.html" class="nav-link sidebar-link sidebar-page" arialabel="Internal Memory"><!---->Internal Memory<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/note/cs/co/Memory/External-Memory.html" class="nav-link sidebar-link sidebar-page" arialabel="External Memory"><!---->External Memory<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul><!--]--><!----><!--]--></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">MIPS</span><span class="arrow right"></span></button><!--[--><!--[--><!----><!--]--><!----><!--]--></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->Computer and Cache Memory</h1><div class="article-info"><span class="author-info" arialabel="ä½œè€…ğŸ–Š" data-balloon-pos="down" isoriginal="false" pageview="false" color="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" arialabelledby="author"><title id="author" lang="en">author icon</title><g fill="currentColor"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></g></svg><span><a class="author-item" href="/" target="_blank" rel="noopener noreferrer">HongShu</a></span><span property="author" content="HongShu"></span></span><!----><span class="date-info" arialabel="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down" isoriginal="false" pageview="false" color="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" arialabelledby="calendar"><title id="calendar" lang="en">calendar icon</title><g fill="currentColor"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></g></svg><span>2021å¹´5æœˆ1æ—¥</span><meta property="datePublished" content="2021-05-01T00:00:00.000Z"></span><!----><!----><span class="reading-time-info" arialabel="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down" isoriginal="false" pageview="false" color="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" arialabelledby="timer"><title id="timer" lang="en">timer icon</title><g fill="currentColor"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></g></svg><span>å¤§çº¦ 18 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT18M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc-list"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/note/cs/co/Memory/Introduction-to-Computer-Memory-and-Cache-Memory.html#computer-components-revisited" class="router-link-active router-link-exact-active toc-link level2">Computer components revisited</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/note/cs/co/Memory/Introduction-to-Computer-Memory-and-Cache-Memory.html#computer-memory" class="router-link-active router-link-exact-active toc-link level2">Computer Memory</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/note/cs/co/Memory/Introduction-to-Computer-Memory-and-Cache-Memory.html#motivation" class="router-link-active router-link-exact-active toc-link level3">Motivation</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/note/cs/co/Memory/Introduction-to-Computer-Memory-and-Cache-Memory.html#characteristics-of-memory" class="router-link-active router-link-exact-active toc-link level3">Characteristics of Memory</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/note/cs/co/Memory/Introduction-to-Computer-Memory-and-Cache-Memory.html#memory-hierarchy" class="router-link-active router-link-exact-active toc-link level2">Memory Hierarchy</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/note/cs/co/Memory/Introduction-to-Computer-Memory-and-Cache-Memory.html#access-latency" class="router-link-active router-link-exact-active toc-link level3">Access latency</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/note/cs/co/Memory/Introduction-to-Computer-Memory-and-Cache-Memory.html#locality" class="router-link-active router-link-exact-active toc-link level3">Locality</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/note/cs/co/Memory/Introduction-to-Computer-Memory-and-Cache-Memory.html#cache-memory" class="router-link-active router-link-exact-active toc-link level3">Cache Memory</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/note/cs/co/Memory/Introduction-to-Computer-Memory-and-Cache-Memory.html#structure-of-a-cache-main-memory-system" class="router-link-active router-link-exact-active toc-link level3">Structure of a Cache/Main-Memory System</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/note/cs/co/Memory/Introduction-to-Computer-Memory-and-Cache-Memory.html#write-policy" class="router-link-active router-link-exact-active toc-link level3">Write Policy</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/note/cs/co/Memory/Introduction-to-Computer-Memory-and-Cache-Memory.html#exploiting-locality" class="router-link-active router-link-exact-active toc-link level3">Exploiting locality</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/note/cs/co/Memory/Introduction-to-Computer-Memory-and-Cache-Memory.html#managing-caches" class="router-link-active router-link-exact-active toc-link level3">Managing caches</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/note/cs/co/Memory/Introduction-to-Computer-Memory-and-Cache-Memory.html#replacement-policy" class="router-link-active router-link-exact-active toc-link level2">Replacement Policy</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/note/cs/co/Memory/Introduction-to-Computer-Memory-and-Cache-Memory.html#lru-replacement" class="router-link-active router-link-exact-active toc-link level3">LRU Replacement</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/note/cs/co/Memory/Introduction-to-Computer-Memory-and-Cache-Memory.html#fifo-replacement" class="router-link-active router-link-exact-active toc-link level3">FIFO Replacement</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/note/cs/co/Memory/Introduction-to-Computer-Memory-and-Cache-Memory.html#lifo-replacement" class="router-link-active router-link-exact-active toc-link level3">LIFO Replacement</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><!--[--><h1 id="computer-and-cache-memory" tabindex="-1"><a class="header-anchor" href="#computer-and-cache-memory" aria-hidden="true">#</a> Computer and Cache Memory</h1><h2 id="computer-components-revisited" tabindex="-1"><a class="header-anchor" href="#computer-components-revisited" aria-hidden="true">#</a> Computer components revisited</h2><img src="https://pic.hanjiaming.com.cn/2021/04/07/b306fada01c11.png" alt="image.png" title="image.png"><img src="https://pic.hanjiaming.com.cn/2021/04/07/70b7fd8eb1e55.png" alt="image.png" title="image.png"><h2 id="computer-memory" tabindex="-1"><a class="header-anchor" href="#computer-memory" aria-hidden="true">#</a> Computer Memory</h2><p>Computer memory refers to any physical device capable of storing informationã€Œè®¡ç®—æœºå†…å­˜æ˜¯æŒ‡èƒ½å¤Ÿå­˜å‚¨ä¿¡æ¯çš„ä»»ä½•ç‰©ç†è®¾å¤‡ã€</p><p>a wide range of type, technology, performance, cost, etc. --- Characteristics of Memoryã€Œç±»å‹ï¼ŒæŠ€æœ¯ï¼Œæ€§èƒ½ï¼Œæˆæœ¬ç­‰å¹¿æ³›çš„èŒƒå›´-å†…å­˜çš„ç‰¹å¾ã€</p><p>Memory organization: select the right memory, and put it to the right place</p><h3 id="motivation" tabindex="-1"><a class="header-anchor" href="#motivation" aria-hidden="true">#</a> Motivation</h3><p>Choosing the right memory (physical device) is just like buying the right deskã€Œé€‰æ‹©åˆé€‚çš„å†…å­˜ï¼ˆç‰©ç†è®¾å¤‡ï¼‰å°±åƒè´­ä¹°åˆé€‚çš„åŠå…¬æ¡Œã€</p><p>Underlyingã€ŒåŸºæœ¬çš„ã€ learning goals:</p><ul><li>trade-off between performance and cost</li><li>design philosophiesã€Œå“²ç†ã€/techniques to use constrained cost to achieve better performanceã€Œè®¾è®¡å“²å­¦/æŠ€æœ¯ä»¥ä½¿ç”¨æœ‰é™çš„æˆæœ¬æ¥è·å¾—æ›´å¥½çš„æ€§èƒ½ã€</li></ul><h3 id="characteristics-of-memory" tabindex="-1"><a class="header-anchor" href="#characteristics-of-memory" aria-hidden="true">#</a> <strong>Characteristics</strong> of Memory</h3><p>Memory can be categorizedã€Œåˆ†ç±»ã€ from many aspectsã€Œæ–¹é¢ã€</p><ul><li>the technology it uses</li><li>the physical media</li><li>the cost</li><li>the access speed</li><li>the location (where it is in the computer)</li></ul><h4 id="location" tabindex="-1"><a class="header-anchor" href="#location" aria-hidden="true">#</a> Location</h4><ul><li>internal memory or external memory? <ul><li>internal: registers in processor, main memory, cache, etc.</li><li>external: the peripheral storage devices, such as disk and tape -- they are accessible to the processor via I/O controllers</li></ul></li></ul><p>æ³¨æ„ï¼šä¸€èˆ¬åœ¨æŒä¹…åœ¨ä¸»æ¿ä¸Šæ’ç€çš„ Memory ç®— internal memory</p><h4 id="access-method" tabindex="-1"><a class="header-anchor" href="#access-method" aria-hidden="true">#</a> Access method</h4><h5 id="sequential-access" tabindex="-1"><a class="header-anchor" href="#sequential-access" aria-hidden="true">#</a> Sequential Access</h5><p>ã€Œé¡ºåºè®¿é—®ã€</p><ul><li>memory is organized into units of data (records)ã€Œå†…å­˜ä»¥æ•°æ®ï¼ˆè®°å½•ï¼‰ä¸ºå•ä½è¿›è¡Œç»„ç»‡ï¼›ã€;</li><li>access each records in sequence: move from a current location to the desired location sequentiallyã€Œä¾æ¬¡è®¿é—®æ¯ä¸ªè®°å½•ï¼šä»å½“å‰ä½ç½®é¡ºåºç§»åŠ¨åˆ°æ‰€éœ€ä½ç½®ã€</li><li>as a result, the time to access an arbitrary record is highly variableã€Œéå¸¸å¯å˜çš„ã€</li></ul><p>example: tapeã€Œç£å¸¦ã€</p><img src="https://pic.hanjiaming.com.cn/2021/04/07/3d59e9efb4597.png" alt="image.png" title="image.png"><h5 id="direct-access-random-access" tabindex="-1"><a class="header-anchor" href="#direct-access-random-access" aria-hidden="true">#</a> Direct Access/Random Access</h5><ul><li>each location in the memory has a unique addressã€Œå†…å­˜ä¸­çš„æ¯ä¸ªä½ç½®éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„åœ°å€ã€</li><li>direct access often refers to secondary devices such as disks (access the block of data, may plus sequential search)ã€Œç›´æ¥è®¿é—®é€šå¸¸æ˜¯æŒ‡è¯¸å¦‚ç£ç›˜ä¹‹ç±»çš„è¾…åŠ©è®¾å¤‡ï¼ˆè®¿é—®æ•°æ®å—ï¼Œå¯èƒ½è¿˜éœ€è¦é¡ºåºæœç´¢ï¼‰ã€</li><li>random access often refers to main memory or cacheã€Œéšæœºè®¿é—®é€šå¸¸æ˜¯æŒ‡ä¸»å†…å­˜æˆ–ç¼“å­˜ã€</li><li>the time to access a given location is typically independent of the sequence of prior accesses and is often constantã€Œè®¿é—®ç»™å®šä½ç½®çš„æ—¶é—´é€šå¸¸ä¸å…ˆå‰è®¿é—®çš„é¡ºåºæ— å…³ï¼Œå¹¶ä¸”é€šå¸¸æ˜¯æ’å®šçš„ã€</li></ul><img src="https://pic.hanjiaming.com.cn/2021/04/07/a0bd5e5c66dbb.png" alt="image.png" title="image.png"><h4 id="access-time-latency" tabindex="-1"><a class="header-anchor" href="#access-time-latency" aria-hidden="true">#</a> Access Time (latency)</h4><ul><li>Measures of Performance -- Access Time (latency)ã€Œæ€§èƒ½æŒ‡æ ‡-è®¿é—®æ—¶é—´ï¼ˆå»¶è¿Ÿï¼‰ã€</li><li>for random access, the time it takes to perform a read or write operation, i.e., from the time when an address is presented to memory to the time when data have been stored or become availableã€Œå¯¹äºéšæœºè®¿é—®ï¼Œæ‰§è¡Œè¯»æˆ–å†™æ“ä½œæ‰€èŠ±è´¹çš„æ—¶é—´ï¼Œå³ <strong>ä»å°†åœ°å€ç»™å†…å­˜çš„æ—¶é—´ åˆ° æ•°æ®å·²å­˜å‚¨æˆ–å¯ç”¨ çš„æ—¶é—´</strong>ã€</li><li>for non-random access, from the time the instruction is issued to the time the data position is located for read/write operationã€Œå¯¹äºééšæœºè®¿é—®ï¼Œä» <strong>å‘å‡ºæŒ‡ä»¤çš„æ—¶é—´åˆ°ä¸ºè¯»/å†™æ“ä½œå®šä½æ•°æ®ä½ç½®</strong> çš„æ—¶é—´ã€</li></ul><h4 id="memory-cycle-time" tabindex="-1"><a class="header-anchor" href="#memory-cycle-time" aria-hidden="true">#</a> Memory Cycle Time</h4><p>Measures of Performance -- Memory Cycle Time</p><p>Primarilyã€Œä¸»è¦ã€ applied to random access memoryã€Œä¸»è¦åº”ç”¨äºéšæœºå­˜å–å­˜å‚¨å™¨ã€ï¼šit consists of the access time plus any additional time required before a second access can be made (cycle)ã€Œå®ƒç”± è®¿é—®æ—¶é—´åŠ ä¸Š ä»»ä½•é¢å¤–çš„æ—¶é—´ åœ¨ç¬¬äºŒæ¬¡è®¿é—®å¯è¢«æ‰§è¡Œå‰ã€</p><p>Example: in computer games, skills (QWER) + cool downã€Œåœ¨ç”µè„‘æ¸¸æˆä¸­ï¼ŒæŠ€èƒ½ï¼ˆQWERï¼‰+å†·é™ä¸‹æ¥ã€</p><p>it is concerned with the system busã€Œå®ƒä¸ç³»ç»Ÿæ€»çº¿æœ‰å…³ã€</p><p><strong>An associated concept is transfer rate = 1/memory cycle time</strong><br> é¢‘ç‡ä¸€èˆ¬æ˜¯è¿™æ ·è®¡ç®—å‡ºæ¥çš„</p><h4 id="physical-materials-technologies" tabindex="-1"><a class="header-anchor" href="#physical-materials-technologies" aria-hidden="true">#</a> Physical materials/technologies</h4><ul><li>semiconductor: RAM, Cacheã€Œé«˜é€Ÿç¼“å­˜ã€</li><li>magnetic: hard-drive</li><li>solid-state devices (a kind of semiconductor technology); replace hard-driveã€Œå›ºæ€è®¾å¤‡ï¼ˆä¸€ç§åŠå¯¼ä½“æŠ€æœ¯ï¼‰ï¼›æ›¿ä»£ç¡¬ç›˜ã€</li><li>optical: CDã€Œå…‰å­¦çš„ï¼šCDã€</li></ul><h4 id="volatile-vs-non-volatile" tabindex="-1"><a class="header-anchor" href="#volatile-vs-non-volatile" aria-hidden="true">#</a> Volatile vs. Non-volatile</h4><p>Physical featuresã€Œç‰©ç†ç‰¹æ€§ã€ -- Volatile vs. Non-volatile</p><ul><li>Volatile memory: need power to maintain the stored information (memory is lost when power is off), e.g., registers, RAMã€Œæ˜“å¤±æ€§å†…å­˜ï¼šéœ€è¦ç”µæºæ¥ç»´æŠ¤å­˜å‚¨çš„ä¿¡æ¯ï¼ˆç”µæºå…³é—­æ—¶å†…å­˜ä¸¢å¤±ï¼‰ï¼Œä¾‹å¦‚å¯„å­˜å™¨ï¼ŒRAMã€</li><li>non-volatile memory: no need to be charged all the time, e.g., hard driveã€Œéæ˜“å¤±æ€§å­˜å‚¨å™¨ï¼šæ— éœ€ä¸€ç›´å……ç”µï¼Œä¾‹å¦‚ç¡¬ç›˜é©±åŠ¨å™¨ã€</li></ul><h4 id="erasable-vs-non-erasable" tabindex="-1"><a class="header-anchor" href="#erasable-vs-non-erasable" aria-hidden="true">#</a> Erasable vs. Non-erasable</h4><p>Physical features -- Erasable vs. Non-erasable</p><ul><li>erasable: can be deleted or rewritten with new data, e.g., registers, hard drive</li><li>non-earsable: cannot be delelted/rewritten, e.g., ROM (Read Only Memory), CD</li></ul><img src="https://pic.hanjiaming.com.cn/2021/04/07/e2098839ffa27.png" alt="image.png" title="image.png"><img src="https://pic.hanjiaming.com.cn/2021/04/07/04b38cc8be69f.png" alt="image.png" title="image.png"><h2 id="memory-hierarchy" tabindex="-1"><a class="header-anchor" href="#memory-hierarchy" aria-hidden="true">#</a> Memory Hierarchy</h2><p>Memory Hierarchyã€Œå†…å­˜å±‚æ¬¡ç»“æ„ã€</p><p>In the hierarchy</p><ul><li>closer to the processor: we have faster but lower-capacity, more expensive memoryã€Œè·ç¦»å¤„ç†å™¨æ›´è¿‘ï¼šæˆ‘ä»¬æ‹¥æœ‰æ›´å¿«ä½†å®¹é‡æ›´ä½ï¼Œå†…å­˜æ›´æ˜‚è´µçš„å†…å­˜ã€</li><li>further to the processor: we have slower but higher-capacity, less expensive memoryã€Œè·ç¦»å¤„ç†å™¨æ›´è¿œï¼šæˆ‘ä»¬çš„å†…å­˜é€Ÿåº¦è¾ƒæ…¢ä½†å®¹é‡è¾ƒé«˜ï¼Œå†…å­˜ä»·æ ¼è¾ƒä¾¿å®œã€</li><li>the essential design question: can we &quot;alloate&quot; the information such that frequently accessed information is stored in faster memoryã€Œè®¾è®¡çš„åŸºæœ¬é—®é¢˜ï¼šæˆ‘ä»¬èƒ½å¦â€œåˆ†é…â€ä¿¡æ¯ï¼Œä»¥ä¾¿å°†ç»å¸¸è®¿é—®çš„ä¿¡æ¯å­˜å‚¨åœ¨æ›´å¿«çš„å†…å­˜ä¸­ã€</li></ul><p>example: Program Counter register</p><h3 id="access-latency" tabindex="-1"><a class="header-anchor" href="#access-latency" aria-hidden="true">#</a> Access latency</h3><p>Access latencyã€Œå­˜å–å»¶è¿Ÿã€</p><img src="https://pic.hanjiaming.com.cn/2021/04/07/4b4054871af47.png" alt="image.png" title="image.png"><ul><li>Time used by CPU to execute one instruction <ul><li>1 cycle for most instructions (1GHz CPU, 1 cycle = 10-9s)</li></ul></li><li>Time used to fetch a word from main memory <ul><li>10 ~ 100 cycles</li></ul></li><li>Time used to fetch a block of data from disks <ul><li>10,000 ~ 1,000,000 cycles</li></ul></li></ul><p>The gapã€Œé—´éš™ã€ between CPU, main memory and disks</p><img src="https://pic.hanjiaming.com.cn/2021/04/07/68881ede4ffdd.png" alt="image.png" title="image.png"><p>Solve the problem: a fast CPU is wasted by waiting for slow memory?</p><p>The processor has access to two levels of memory</p><ul><li>Level-1: capacity C1 = 100 words, access time T1 = 0.1s</li><li>Level-2: capacity C2 = 1000 words, access time T2 = 1s</li></ul><p>access mechanism: if some data is in Level-1, directly access the data; ã€Œè®¿é—®æœºåˆ¶ï¼šå¦‚æœæŸäº›æ•°æ®å¤„äºçº§åˆ«1ï¼Œåˆ™ç›´æ¥è®¿é—®æ•°æ®ï¼›ã€otherwise, move the data from Level-2 to Level-1 first, and then access the data from Level-1ã€Œå¦åˆ™ï¼Œé¦–å…ˆå°†æ•°æ®ä»Level-2ç§»åˆ°Level-1ï¼Œç„¶åä»Level-1è®¿é—®æ•°æ®ã€</p><p>T1 vs. (T1 + T2)</p><h3 id="locality" tabindex="-1"><a class="header-anchor" href="#locality" aria-hidden="true">#</a> Locality</h3><h4 id="clustering-effect" tabindex="-1"><a class="header-anchor" href="#clustering-effect" aria-hidden="true">#</a> Clustering effect</h4><p>åœ¨å†…å­˜ä¸­ï¼Œbitç»„æˆbyteï¼Œå¤šè¡Œbyteç»„æˆwordï¼Œå¤šä¸ªwordç»„æˆblockã€‚</p><p>Basic idea: during program execution, memory accesses (for instructions and data) by processor tend to clusterã€ŒåŸºæœ¬æ€æƒ³ï¼šåœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¤„ç†å™¨å¯¹å†…å­˜çš„è®¿é—®ï¼ˆç”¨äºæŒ‡ä»¤å’Œæ•°æ®ï¼‰å€¾å‘äºèšé›†ã€</p><p>Reasons: programs typically contain loops/subroutines -- repeatedly access a small set of instructions; also, for data, operations on tables and arrays involve access to a clustered set of dataã€ŒåŸå› ï¼šç¨‹åºé€šå¸¸åŒ…å«å¾ªç¯/å­ä¾‹ç¨‹-é‡å¤è®¿é—®ä¸€å°ç»„æŒ‡ä»¤;åŒæ ·ï¼Œå¯¹äºæ•°æ®ï¼Œå¯¹è¡¨å’Œæ•°ç»„çš„æ“ä½œæ¶‰åŠå¯¹é›†ç¾¤æ•°æ®é›†çš„è®¿é—®ã€</p><p>During some specific time period, processor wants to access a portion of main memory (one cluster)ã€Œåœ¨æŸä¸ªç‰¹å®šæ—¶é—´æ®µå†…ï¼Œå¤„ç†å™¨å¸Œæœ›è®¿é—®ä¸»å†…å­˜çš„ä¸€éƒ¨åˆ†ï¼ˆä¸€ä¸ªé›†ç¾¤ï¼‰ã€</p><p>Over time, processor accesses different clustersã€Œéšç€æ—¶é—´çš„æµé€ï¼Œå¤„ç†å™¨è®¿é—®ä¸åŒçš„é›†ç¾¤ã€</p><img src="https://pic.hanjiaming.com.cn/2021/04/07/1ad834c46e638.png" alt="image.png" title="image.png"><h4 id="concept" tabindex="-1"><a class="header-anchor" href="#concept" aria-hidden="true">#</a> Concept</h4><ul><li>Principle of locality: Programs tend to use data and instructions with addresses near or equal to those they have used recentlyã€Œæœ¬åœ°æ€§åŸåˆ™ï¼šç¨‹åºå€¾å‘äºä½¿ç”¨åœ°å€æˆ–åœ°å€ä¸å®ƒä»¬æœ€è¿‘ä½¿ç”¨çš„åœ°å€æ¥è¿‘æˆ–ç›¸ç­‰çš„æ•°æ®å’ŒæŒ‡ä»¤ã€‚ã€</li><li>Temporalã€Œæ—¶é—´ã€ locality: recently referenced items (data, instructions) are likely to be referenced again in the near futureã€Œæ—¶é—´ä½ç½®ï¼šè¿‘æœŸå¼•ç”¨çš„é¡¹ç›®ï¼ˆæ•°æ®ï¼Œè¯´æ˜ï¼‰å¯èƒ½ä¼šåœ¨ä¸ä¹…çš„å°†æ¥å†æ¬¡å¼•ç”¨ã€</li><li>Spatialã€Œç©ºé—´ã€ locality: items (data, instructions) with nearby addresses tend to be referenced close together in timeã€Œç©ºé—´ä½ç½®ï¼šå…·æœ‰é™„è¿‘åœ°å€çš„é¡¹ç›®ï¼ˆæ•°æ®ï¼ŒæŒ‡ä»¤ï¼‰å¾€å¾€åœ¨æ—¶é—´ä¸Šé è¿‘åœ¨ä¸€èµ·å¼•ç”¨ã€</li></ul><p>THINK: WHY LOCALITY EXISTS?</p><h4 id="example-two-level-memory" tabindex="-1"><a class="header-anchor" href="#example-two-level-memory" aria-hidden="true">#</a> Example: Two-Level Memory</h4><p>Hit Ratio: the fraction of accesses involving only Level-1</p><img src="https://pic.hanjiaming.com.cn/2021/04/07/7c3301409c48a.png" alt="image.png" title="image.png"><p>Conclusion-- increase the hit ratio</p><img src="https://pic.hanjiaming.com.cn/2021/04/07/3044bb32a2838.png" alt="image.png" title="image.png"><h4 id="examples-of-locality" tabindex="-1"><a class="header-anchor" href="#examples-of-locality" aria-hidden="true">#</a> Examples of locality</h4><p>To compute the sum of all elements in an 2-D array</p><img src="https://pic.hanjiaming.com.cn/2021/04/07/be300de3c3488.png" alt="image.png" title="image.png"><p>åŒæ—¶æˆ‘ä»¬å‘ç°æ•°ç»„æ˜¯æŒ‰x-y-zçš„ç»´åº¦å­˜å‚¨çš„ã€‚æ‰€ä»¥ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„ç®—æ³•æ—¶</p><img src="https://pic.hanjiaming.com.cn/2021/04/07/cb956aaadce82.png" alt="image.png" title="image.png" width="240px"><p>å°±æ˜¯ BAD LOCALITY</p><h4 id="examples-of-temporal-locality" tabindex="-1"><a class="header-anchor" href="#examples-of-temporal-locality" aria-hidden="true">#</a> Examples of temporal locality</h4><ul><li><p>Data references</p></li><li><ul><li>The access to â€œsumâ€ in the inner loop</li><li>Once accesses, will be accessed again in the near futureã€Œä¸€æ—¦æ‰§è¡Œï¼Œå°†åœ¨ä¸ä¹…çš„å°†æ¥å†æ¬¡æ‰§è¡Œã€</li></ul></li><li><p>Instruction references</p></li><li><ul><li>The instructions to do â€œsum += a[][]â€</li><li>Once executed, will be executed again in the near future</li></ul></li></ul><p>To understand locality for â€œdataâ€ and â€œinstructionsâ€:<br> They are essentially the same, as instructions are special data stored in memory</p><h4 id="to-measure-locality" tabindex="-1"><a class="header-anchor" href="#to-measure-locality" aria-hidden="true">#</a> To measure locality</h4><p>å¦‚ä½•è¯„ä»·ä¸€ä¸ªlocalityçš„å¥½åå‘¢ï¼Ÿ</p><ul><li>Stride: The distance of two adjacent data accesses in memory location, in the unit of 1 data elementã€Œæ­¥å¹…ï¼šå†…å­˜ä½ç½®ä¸­ä¸¤ä¸ªç›¸é‚»æ•°æ®è®¿é—®çš„è·ç¦»ï¼Œä»¥1ä¸ªæ•°æ®å…ƒç´ çš„é•¿åº¦ä¸ºç›¸åŒå•ä½ã€ <ul><li>Stride-1 reference pattern: access the data one by one according to their memory addresses, such as the good locality exampleã€Œæ ¹æ®æ•°æ®çš„å­˜å‚¨åœ°å€ä¸€ä¸€è®¿é—®æ•°æ®ï¼Œä¾‹å¦‚è‰¯å¥½çš„localityç¤ºä¾‹ã€</li><li>Stride-k reference pattern: for example, the bad locality example generally has a stride-4 reference patternã€Œä¾‹å¦‚ï¼Œä¸è‰¯localityç¤ºä¾‹é€šå¸¸å…·æœ‰ a stride-4 reference patternã€</li></ul></li><li>The smaller the stride, the better the localityã€Œæ­¥å¹…è¶Šå°ï¼Œlocality è¶Šå¥½ã€</li></ul><h3 id="cache-memory" tabindex="-1"><a class="header-anchor" href="#cache-memory" aria-hidden="true">#</a> Cache Memory</h3><img src="https://pic.hanjiaming.com.cn/2021/04/07/5cecb7a84188e.png" alt="image.png" title="image.png"><p>è¿™é‡Œå†°ç®±å°±ç›¸å½“äº Cache Memory</p><p>Caching ideaï¼šAdding a small but fast memory inside the CPU</p><img src="https://pic.hanjiaming.com.cn/2021/04/07/0f77d2ce106a8.png" alt="image.png" title="image.png"><p>cacheæ˜¯ä¸€è¡Œä¸€è¡Œçš„ã€‚æˆ‘ä»¬è®¤ä¸º cache æ¯è¡Œé•¿åº¦ = å†…å­˜æ¯ä¸ªblockå¤§å°ã€‚</p><h4 id="concept-1" tabindex="-1"><a class="header-anchor" href="#concept-1" aria-hidden="true">#</a> Concept</h4><img src="https://pic.hanjiaming.com.cn/2021/04/07/e9c84f5447c5a.png" alt="image.png" title="image.png"><p>Cache is fast but has relatively small capacity.ã€Œç¼“å­˜é€Ÿåº¦å¿«ï¼Œä½†å®¹é‡ç›¸å¯¹è¾ƒå°ã€‚ã€</p><p>Basic mechanism: cache contains the copy of portions of main memory (blocks). ã€ŒåŸºæœ¬æœºåˆ¶ï¼šé«˜é€Ÿç¼“å­˜åŒ…å«ä¸»å†…å­˜éƒ¨åˆ†ï¼ˆå—ï¼‰çš„å‰¯æœ¬ã€‚ã€</p><ul><li>when CPU wants to read a word: <ul><li>if the word is in cache, access the word</li><li>else a block of main memory (containing that word) is read into cache</li></ul></li><li>thenthe word is delivered to CPUã€Œå¦åˆ™å°†ä¸€å—ä¸»å­˜å‚¨å™¨ï¼ˆåŒ…å«è¯¥å•è¯ï¼‰è¯»å…¥ç¼“å­˜ï¼Œç„¶åè¿™ä¸ªè¯è¢«äº¤ä»˜ç»™CPUã€</li></ul><p>Due to locality of reference, the hit ratio is high (words can be found in cache with high chance)ã€ŒDue to locality of reference å‘½ä¸­ç‡å¾ˆé«˜ï¼ˆå¯ä»¥åœ¨é«˜é€Ÿç¼“å­˜ä¸­æ‰¾åˆ°å•è¯ï¼‰ã€</p><p>As a result, as if there is memory with large capacity and fast access speedã€Œç»“æœï¼Œå¥½åƒæœ‰å¤§å®¹é‡ä¸”è®¿é—®é€Ÿåº¦å¿«çš„å†…å­˜ã€</p><h4 id="example" tabindex="-1"><a class="header-anchor" href="#example" aria-hidden="true">#</a> Example</h4><p>Assume When a program executes, it generates 20 memory accesses<br> ABCDCCCDDDEGHGHGHGHB</p><p>The unit of data loading is â€œone blockâ€ï¼šOne block contains two data variables</p><ul><li>Cache size = 2 blocks</li><li>Data access time <ul><li>Cache hit: 1 cycleã€Œç¼“å­˜å‘½ä¸­ï¼š1ä¸ªå‘¨æœŸã€</li><li>ã€Œç¼“å­˜æœªå‘½ä¸­ï¼š200ä¸ªå‘¨æœŸã€</li></ul></li></ul><img src="https://pic.hanjiaming.com.cn/2021/04/07/a3d302d2fa796.png" alt="image.png" title="image.png"><img src="https://pic.hanjiaming.com.cn/2021/04/07/3292afeed1f5b.png" alt="image.png" title="image.png"><p>Performance with cacheï¼šAccess time = 1 * 15 + 5 * 200 = 1015 cycles Performance without cacheï¼šAccess time = 200 * 20 = 4000 cycles</p><p>æ³¨ï¼šå‡è®¾åˆ¤æ–­ä¸éœ€è¦æ—¶é—´ã€‚ä»å†…å­˜æå–æ•°æ®çš„é—´éš™æ˜¯ 200c ï¼Œä» cash æå–æ•°æ®é—´éš™æ˜¯ 15c</p><p>Multiple-Level Cache Organization å›¾ç¤º</p><img src="https://pic.hanjiaming.com.cn/2021/04/07/7f000345e3c0a.png" alt="image.png" title="image.png"><h4 id="application" tabindex="-1"><a class="header-anchor" href="#application" aria-hidden="true">#</a> Application</h4><img src="https://pic.hanjiaming.com.cn/2021/04/27/c5fa8774ea8cc.png" alt="CleanShot 2021-04-27 at 12.31.42@2x.png" title="CleanShot 2021-04-27 at 12.31.42@2x.png" width="300px"><h3 id="structure-of-a-cache-main-memory-system" tabindex="-1"><a class="header-anchor" href="#structure-of-a-cache-main-memory-system" aria-hidden="true">#</a> Structure of a Cache/Main-Memory System</h3><img src="https://pic.hanjiaming.com.cn/2021/04/07/305fa65e5042d.png" alt="image.png" title="image.png"><p>The Cache consists of m <strong>lines,</strong> where each line has a length of K words (the size of one block in memory)ã€Œcache ç”±mè¡Œç»„æˆï¼Œå…¶ä¸­æ¯è¡Œçš„é•¿åº¦ä¸ºKä¸ªå­—ï¼ˆå†…å­˜ä¸­ä¸€ä¸ªå—çš„å¤§å°ï¼‰ã€</p><img src="https://pic.hanjiaming.com.cn/2021/04/07/7ff4348d3fede.png" alt="image.png" title="image.png" width="350px"><p><strong>m lines</strong> in Cache vs. <strong>M blocks</strong> in Memory <strong>(m &lt;&lt;M)</strong></p><p>access mechanism: when we want to access a word in the memory, the whole block containing that word is copied into one line of cacheã€Œè®¿é—®æœºåˆ¶ï¼šå½“æˆ‘ä»¬è¦è®¿é—®å†…å­˜ä¸­çš„ä¸€ä¸ªwordæ—¶ï¼ŒåŒ…å«è¯¥wordçš„æ•´ä¸ªå—è¢«å¤åˆ¶åˆ°ç¼“å­˜çš„ä¸€è¡Œä¸­</p><p>One cache line cannot be permanently allocated to one memory block -- use the tag to indicate which block is stored in cache (more on this later)ã€Œä¸€æ¡é«˜é€Ÿç¼“å­˜è¡Œä¸èƒ½æ°¸ä¹…åˆ†é…ç»™ä¸€ä¸ªå†…å­˜å—-ä½¿ç”¨æ ‡ç­¾æŒ‡ç¤ºå“ªä¸ªå—å­˜å‚¨åœ¨é«˜é€Ÿç¼“å­˜ä¸­ï¼ˆç¨åä¼šè¯¦ç»†ä»‹ç»ï¼‰ã€</p><p>Illustration of Cache Read Operation å¦‚ä¸‹</p><img src="https://pic.hanjiaming.com.cn/2021/04/07/b886280cea662.png" alt="image.png" title="image.png"><p>Typical Cache Organization å¦‚ä¸‹å›¾</p><img src="https://pic.hanjiaming.com.cn/2021/04/07/fbde1110fca38.png" alt="image.png" title="image.png"><p>Mapping Functionâ€”â€”Basic Elements of Cache Design</p><h4 id="mapping-function" tabindex="-1"><a class="header-anchor" href="#mapping-function" aria-hidden="true">#</a> Mapping Function</h4><p>The essential problem we want to address: map M memory blocks to m cache lines (m &lt;&lt; M)â€”â€”mapping functionã€Œæˆ‘ä»¬è¦è§£å†³çš„åŸºæœ¬é—®é¢˜ï¼šå°†Mä¸ªå†…å­˜å—æ˜ å°„åˆ°mä¸ªç¼“å­˜è¡Œï¼ˆm &lt;&lt; Mï¼‰-æ˜ å°„åŠŸèƒ½ã€</p><img src="https://pic.hanjiaming.com.cn/2021/04/07/5836c70fcf801.png" alt="image.png" title="image.png"><p>A mapping function defines where the needed blocks in memory are loaded to Cache (M blocks, m positions)ã€Œæ˜ å°„åŠŸèƒ½å®šä¹‰å°†å†…å­˜ä¸­æ‰€éœ€çš„å—åŠ è½½åˆ°é«˜é€Ÿç¼“å­˜çš„ä½ç½®ï¼ˆMä¸ªå—ï¼Œmä¸ªä½ç½®ï¼‰ã€</p><ul><li>direct mapping: a kind of fixed mapping, i.e., blocks in memory are allocated to fixed cache lines <ul><li>Q = M/m, Q blocks are mapped to one single cache line; Q to 1 mappingã€ŒQ = M / mï¼ŒQä¸ªå—è¢« æ˜ å°„ åˆ°ä¸€æ¡ cache lineï¼› Qå¯¹1æ˜ å°„ã€</li></ul></li><li>associative mapping: any block can go to any cache lineã€Œå…³è”æ˜ å°„ï¼šä»»ä½•å— éƒ½å¯ä»¥åˆ° ä»»ä½• cache lineã€</li></ul><h5 id="direct-mapping" tabindex="-1"><a class="header-anchor" href="#direct-mapping" aria-hidden="true">#</a> Direct mapping</h5><h6 id="direct-mapping-example" tabindex="-1"><a class="header-anchor" href="#direct-mapping-example" aria-hidden="true">#</a> Direct mapping Example</h6><p>Map all students to 10 seats using direct mapping</p><ul><li>suppose SID has 8 digits, split SID into 2 parts: first 7 digits and the last digitã€Œå‡è®¾SIDæœ‰8ä½æ•°å­—ï¼Œåˆ™å°†SIDåˆ†ä¸º2éƒ¨åˆ†ï¼šå‰7ä½å’Œå1ä½ã€</li><li>use your last digit as your seat number -- all students are divided into 10 groups, it is a fixed mappingã€Œç”¨æ‚¨çš„æœ€åä¸€ä½æ•°å­—ä½œä¸ºåº§ä½å·-æ‰€æœ‰å­¦ç”Ÿåˆ†ä¸º10ç»„ï¼Œè¿™æ˜¯ä¸€ä¸ªå›ºå®šçš„æ˜ å°„ã€</li></ul><p>How can we know who is currently sitting in seat i (i 0 to 9)?ã€Œæˆ‘ä»¬å¦‚ä½•çŸ¥é“è°ç°åœ¨ååœ¨åº§ä½iï¼ˆi 0åˆ°9ï¼‰ä¸­ï¼Ÿã€</p><p>a student can use the first 7 digits as a tag -- the tag is unique for that particular studentã€Œä¸€ä¸ªå­¦ç”Ÿå¯ä»¥ä½¿ç”¨å‰7ä½æ•°å­—ä½œä¸ºæ ‡ç­¾-è¯¥æ ‡ç­¾å¯¹äºè¯¥ç‰¹å®šå­¦ç”Ÿæ˜¯å”¯ä¸€çš„ã€</p><img src="https://pic.hanjiaming.com.cn/2021/04/07/7d57e6b79307c.png" alt="image.png" title="image.png"><p>SID = memory address (tag in cache is a portion of memory address)ã€ŒSID =å†…å­˜åœ°å€ï¼ˆç¼“å­˜ä¸­çš„æ ‡ç­¾æ˜¯å†…å­˜åœ°å€çš„ä¸€éƒ¨åˆ†ï¼‰ã€</p><h6 id="implementation" tabindex="-1"><a class="header-anchor" href="#implementation" aria-hidden="true">#</a> Implementation</h6><ul><li>Use main memory address to implement direct mappingã€Œä½¿ç”¨ main memory address å®ç°ç›´æ¥æ˜ å°„ã€</li><li>bear in mind that Cache line = Memory Block (they contain the same number of words)ã€Œè¯·è®°ä½ï¼Œç¼“å­˜è¡Œ=å†…å­˜å—ï¼ˆå®ƒä»¬åŒ…å«ç›¸åŒæ•°é‡çš„å­—ï¼‰ã€</li></ul><img src="https://pic.hanjiaming.com.cn/2021/04/08/e95e52739c8a3.png" alt="image.png" title="image.png"><p>æ³¨æ„ï¼šè¿™å¹¶ä¸è¿èƒŒåœ°å€ç¼–å·çš„ç›¸å…³çŸ¥è¯†ã€‚åŸå› æ˜¯s+wå¹¶ä¸ä¼šå æ»¡æ‰€æœ‰çš„æ¯”ç‰¹ä½ã€‚</p><h6 id="cache-interpret" tabindex="-1"><a class="header-anchor" href="#cache-interpret" aria-hidden="true">#</a> Cache interpret</h6><p>How would the cache interpretã€Œè§£é‡Šã€ main memory address?</p><img src="https://pic.hanjiaming.com.cn/2021/04/08/a3495e9188da5.png" alt="image.png" title="image.png"><p>Exampleï¼šs = 4 bits, r = 2 bits</p><ul><li><p>01 11 â€” 11 determines which line you should go to</p></li><li><p>00 11, 01 11, 10 11, 11 11: the four blocks ending with 11 will go to the same line; they are differentiated by the tag (first two bits)</p></li><li><p>01 11 mod 4 = 3 â€” the line with line number 3</p></li></ul><h6 id="summary" tabindex="-1"><a class="header-anchor" href="#summary" aria-hidden="true">#</a> Summary</h6><p>Summary of Mapping Function:</p><ul><li>given a memory address ( s + w) bitsï¼Œwe know which block it is through the s bitsã€Œæˆ‘ä»¬é€šè¿‡sä½çŸ¥é“å®ƒæ˜¯å“ªä¸ªå—ã€ <ul><li>among the s bits, there are r bits, which tell us the line number in Cache that stores this blockã€Œåœ¨sä½ä¸­ï¼Œæœ‰rä½ï¼Œå®ƒä»¬å‘Šè¯‰æˆ‘ä»¬å­˜å‚¨æ­¤å—çš„Cacheä¸­çš„è¡Œå·ã€</li><li>As there are more blocks than lines (s &gt; r), the remaining (s - r) bits serve as a tag for the Cache line, telling us which block this line is currently storing</li></ul></li></ul><p>Multiple Blocks to One Lineï¼šaddress s + w bits</p><ul><li>cache will interprete it as three fields: tag (s-r), line (r), word (w) <ul><li>line (r) determines which line in cache the block will map to</li><li>tag (s-r) determines the current block that line is storing CPU can directly check that line, and compare the tag fieldã€Œæ¯”è¾ƒæ ‡ç­¾å­—æ®µã€ to determine whether the block is now in the cache</li></ul></li></ul><p>æ³¨ï¼štagä¸æ˜¯è‡ªå¸¦çš„ï¼Œæ˜¯å¯ä»¥è¢«å†™å…¥çš„ã€‚</p><p>How does CPU access a word?</p><ol><li>Given an address (s+w) bits</li><li>Use r bits to locate the line in Cache</li><li>Compare the (s-r) bits with the tag: <ul><li>if (s-r) match, the line stores the desired block; use w bits to identify the desired word</li><li>if (s-r) no match, access the memory, copy the block to the line</li></ul></li></ol><img src="https://pic.hanjiaming.com.cn/2021/04/08/3b73fd74b3948.png" alt="image.png" title="image.png"><h6 id="example-1" tabindex="-1"><a class="header-anchor" href="#example-1" aria-hidden="true">#</a> Example</h6><p>Settingsï¼š</p><ul><li>word = one byte, block = 4 words (4 bytes)</li><li>main memory has 16 Mbytes (note: 1 MB = 1024 KB; 1 KB = 1024B); <ul><li>that is, 2^{24} bytes -&gt; 24 bits for the address</li><li>we have 2^{22} blocks -&gt; s = 22 bits, w = 2 bits</li></ul></li><li>cache has 64 KB = 2^{16} bytes</li></ul><p><strong>R = 14 bits,How many lines are there in the Cache?</strong></p><p>The number of lines are determined by the number of address.</p><p>2^{14} lines -&gt; among the 22 bits, r = 14 bits, 8 bits for the tag</p><h6 id="pros-and-cons" tabindex="-1"><a class="header-anchor" href="#pros-and-cons" aria-hidden="true">#</a> Pros and Cons</h6><ul><li>simple and inexpensive to implement</li><li>main disadvantage: muliptle blocks in memory are mapped to a fixed Cache line <ul><li>if a program happends to access words repeatedly from two different blocks that map into the same line</li><li>the two blocks will be continually swapped in the cache -- low hit ratio</li></ul></li></ul><h5 id="associative-mapping" tabindex="-1"><a class="header-anchor" href="#associative-mapping" aria-hidden="true">#</a> Associative Mapping</h5><p>Key difference from direct mapping:</p><ul><li>a block in memory can be mapped to any line in cacheã€Œå†…å­˜ä¸­çš„ä¸€ä¸ªå—å¯ä»¥æ˜ å°„åˆ°ç¼“å­˜ä¸­çš„ä»»ä½•è¡Œã€</li><li>cache will interpret the address as two fields Tag and Wordã€Œç¼“å­˜ä¼šå°†åœ°å€è§£é‡Šä¸ºTagå’ŒWordä¸¤ä¸ªå­—æ®µã€ <ul><li>address = s + w bits; 2^s blocks in memory</li><li>s serves as the tag, and it is stored together with the dataã€Œsä½œä¸ºæ ‡ç­¾ï¼Œå®ƒä¸æ•°æ®ä¸€èµ·å­˜å‚¨ã€</li></ul></li><li>note: there is no field to determine the line numberã€Œæ³¨æ„ï¼šæ²¡æœ‰ç”¨äºç¡®å®šè¡Œå·çš„å­—æ®µã€</li></ul><h6 id="associative-mapping-example" tabindex="-1"><a class="header-anchor" href="#associative-mapping-example" aria-hidden="true">#</a> Associative Mapping Example</h6><p>Settings:</p><ul><li>memory has 2^{22} blocks, each block has 4 bytes (data = 32 bits)</li><li>address is 24 bits = 22 bits (s) + 2 bits (w)</li><li>Tag: 22 bits</li></ul><img src="https://pic.hanjiaming.com.cn/2021/04/08/36cf701400133.png" alt="image.png" title="image.png"><h6 id="implementation-1" tabindex="-1"><a class="header-anchor" href="#implementation-1" aria-hidden="true">#</a> Implementation</h6><img src="https://pic.hanjiaming.com.cn/2021/04/08/33bb201d268c5.png" alt="image.png" title="image.png"><img src="https://pic.hanjiaming.com.cn/2021/04/08/15af32c54ea74.png" alt="image.png" title="image.png"><p>A block can be mapped to any line in cache! What if the cache is full?</p><ul><li>For direct mapping, there is no choice.</li><li>For associative mapping, we need to decide which block should be replaced --- replacement algorithms</li></ul><p>The main disadvantage of associative mapping is the complex circuitry required to examine the tags of all cache lines in parallelã€Œassociative mapping çš„ä¸»è¦ç¼ºç‚¹æ˜¯éœ€è¦ å¹¶è¡Œæ£€æŸ¥ æ‰€æœ‰ cache è¡Œçš„æ ‡ç­¾çš„ å¤æ‚ç”µè·¯ã€</p><h6 id="replacement-algorithms" tabindex="-1"><a class="header-anchor" href="#replacement-algorithms" aria-hidden="true">#</a> Replacement Algorithms</h6><p><strong>Least Recently Used (LRU)â€”â€”Most popular replacement algorithm</strong></p><ul><li>replace the block that has been in the cache longest with no reference to it</li><li>there requires some extra index to record the time when a line is referenced â€“ the price need to pay</li><li>Simple for two-way set-associative mapping: use a single bit USE to indicate the most recently used line in the set</li></ul><p><strong>Other common replacement algorithms</strong></p><p>First-in-first-out (FIFO): replace that block in the set that has been in the cache longest (what&#39;s the difference from LRU)</p><p>Least Frequently Used (LFU): associate a counter to each line</p><p>Random (not based on usage): randomly pick one to replace â€“ some papers show that Random is only slightly worse than previous usage-based algorithms</p><h5 id="set-associative-mapping" tabindex="-1"><a class="header-anchor" href="#set-associative-mapping" aria-hidden="true">#</a> Set-Associative Mapping</h5><p>not required</p><h3 id="write-policy" tabindex="-1"><a class="header-anchor" href="#write-policy" aria-hidden="true">#</a> Write Policy</h3><p>Why does inconsistency happen?</p><ul><li>multiple CPUsã€Œæ¯”å¦‚åœ¨æœåŠ¡å™¨ä¸­ã€: each CPU has its own cache, which may store the same block in memory</li><li>I/O can directly access main memory</li></ul><p>we need a policy to deal with such inconsistencyã€Œæˆ‘ä»¬éœ€è¦ä¸€é¡¹æ”¿ç­–æ¥åº”å¯¹è¿™ç§çŸ›ç›¾ã€</p><h4 id="write-policy-i-write-through" tabindex="-1"><a class="header-anchor" href="#write-policy-i-write-through" aria-hidden="true">#</a> Write Policy I - Write Through</h4><p>All writes go to cache as well as main memory</p><ul><li>multiple CPUs need to monitor main memory traffic to keep local (with respect to CPU) cache up to date</li><li>lots of traffic</li><li>slows down writes</li></ul><h4 id="write-policy-ii-write-back" tabindex="-1"><a class="header-anchor" href="#write-policy-ii-write-back" aria-hidden="true">#</a> Write Policy II - Write Back</h4><ul><li>Updates initially made in cache only, then memory</li><li>use an extra bit along with each cache line to indicate whether there&#39;s update in this line (set the bit if there&#39;s update)</li><li>when this cache line needs to be replaced, check this bit, write back to memory if the bit is set (such that updates are not lost)</li></ul><p>requirement: I/O has to access cache, not main memory directly</p><h3 id="exploiting-locality" tabindex="-1"><a class="header-anchor" href="#exploiting-locality" aria-hidden="true">#</a> Exploiting locality</h3><h4 id="hints-to-software-developers" tabindex="-1"><a class="header-anchor" href="#hints-to-software-developers" aria-hidden="true">#</a> Hints to software developers</h4><ul><li>Caching leverages locality, good locality make good use of cacheã€Œç¼“å­˜åˆ©ç”¨äº†å±€éƒ¨æ€§ï¼Œè‰¯å¥½çš„å±€éƒ¨æ€§å……åˆ†åˆ©ç”¨äº†é«˜é€Ÿç¼“å­˜ã€</li><li>General principles to write programs with good localityã€Œç¼–å†™å…·æœ‰è‰¯å¥½æœ¬åœ°æ€§çš„ç¨‹åºçš„ä¸€èˆ¬åŸåˆ™ã€ <ul><li>Focus your attention on inner loops, where the CPU spends most of the timeã€Œå°†æ³¨æ„åŠ›é›†ä¸­åœ¨CPUå¤§éƒ¨åˆ†æ—¶é—´éƒ½åœ¨å…¶ä¸­çš„å†…å¾ªç¯ä¸Šã€</li><li>Try to maximize the spatial locality by reading data objects sequentially, with stride 1, in the order they are stored in memoryã€Œå°è¯•é€šè¿‡è·¨æ­¥è¯»å–æ•°æ®å¯¹è±¡ï¼ˆæ­¥é•¿ä¸º1ï¼‰ï¼Œä»¥å°†å®ƒä»¬å­˜å‚¨åœ¨å†…å­˜ä¸­çš„é¡ºåºæ¥æœ€å¤§åŒ–ç©ºé—´å±€éƒ¨æ€§</li><li>Try to maximize the temporal locality by using a data object as often as possible once it has been read from memoryã€Œä»å†…å­˜ä¸­è¯»å–æ•°æ®å¯¹è±¡åï¼Œåº”å°½å¯èƒ½é¢‘ç¹åœ°ä½¿ç”¨å®ƒæ¥å°è¯•æœ€å¤§åŒ–æ—¶é—´å±€éƒ¨æ€§ã€</li></ul></li></ul><h3 id="managing-caches" tabindex="-1"><a class="header-anchor" href="#managing-caches" aria-hidden="true">#</a> Managing caches</h3><p>Design considerations of caches</p><ul><li>Block size <ul><li>Bigger block size exploits spatial localityã€Œæ›´å¤§çš„å—å¤§å°åˆ©ç”¨ç©ºé—´å±€éƒ¨æ€§ã€</li><li>Too big, bringing in many data that will not be used, waste of space and timeã€Œå¤ªå¤§äº†ï¼Œå¸¦æ¥äº†å¾ˆå¤šæ— æ³•ä½¿ç”¨çš„æ•°æ®ï¼Œæµªè´¹äº†ç©ºé—´å’Œæ—¶é—´ã€</li></ul></li><li>Who is in, who is out? <ul><li>Replacement policy: if cache is full, new data going in, evict which data?ã€Œæ›¿æ¢ç­–ç•¥ï¼šå¦‚æœç¼“å­˜å·²æ»¡ï¼Œåˆ™æœ‰æ–°æ•°æ®è¿›å…¥ï¼Œé€å‡ºå“ªäº›æ•°æ®ï¼Ÿã€ <ul><li>Intuitionã€Œç›´è§‰ã€: keep the data being used in the near future in cacheã€Œç›´è§‰ï¼šå°†æ•°æ®åœ¨ä¸ä¹…çš„å°†æ¥ä¿å­˜åœ¨ç¼“å­˜ä¸­ã€But, how do we know which data will be used in the near future?ã€Œä½†æ˜¯ï¼Œæˆ‘ä»¬å¦‚ä½•çŸ¥é“ä¸ä¹…çš„å°†æ¥å°†ä½¿ç”¨å“ªäº›æ•°æ®ï¼Ÿã€</li></ul></li></ul></li></ul><img src="https://pic.hanjiaming.com.cn/2021/04/07/64de54be53967.png" alt="image.png" title="image.png" width="240px"><ul><li>To efficiently find a data item in the cache <ul><li>Find 1 data in 1000 candidates? Takes too long!</li><li>Partition the cache into groups, map different data into different groups</li><li>To find a data item in a smaller group can be efficient, but space may not be fully utilized</li></ul></li></ul><h4 id="impacts-to-hw-design" tabindex="-1"><a class="header-anchor" href="#impacts-to-hw-design" aria-hidden="true">#</a> Impacts to HW design</h4><p>å¯¹ç¡¬ä»¶è®¾è®¡çš„å½±å“â€“å­˜å‚¨å±‚æ¬¡ç»“æ„</p><img src="https://pic.hanjiaming.com.cn/2021/04/07/28b3ee018d930.png" alt="image.png" title="image.png"><ul><li>Conceptuallyã€Œä»æ¦‚å¿µä¸Šè®²ã€, level K can be viewed as a cache of level K+1, storing a subset of K&#39;data in level K+1</li><li>If caching policies are smartly designed, most of the time, cache accesses will be hit</li><li>Pretty much like we have a memory system that works at a speed of the highest level, but have the storage space of the lowest level, with reasonably low priceã€Œä»æ¦‚å¿µä¸Šè®²ï¼Œå¯ä»¥å°†çº§åˆ«Kè§†ä¸ºçº§åˆ«K + 1çš„ç¼“å­˜ï¼Œå°†æ•°æ®çš„å­é›†å­˜å‚¨åœ¨çº§åˆ«K + 1ä¸­ å¦‚æœå¯¹ç¼“å­˜ç­–ç•¥è¿›è¡Œäº†ç²¾å¿ƒè®¾è®¡ï¼Œé‚£ä¹ˆåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç¼“å­˜è®¿é—®å°†å—åˆ°å½±å“ å°±åƒæˆ‘ä»¬æœ‰ä¸€ä¸ªå†…å­˜ç³»ç»Ÿå¯ä»¥ä»¥æœ€é«˜çº§åˆ«çš„é€Ÿåº¦å·¥ä½œï¼Œä½†æ‹¥æœ‰æœ€ä½çº§åˆ«çš„å­˜å‚¨ç©ºé—´å¹¶ä¸”ä»·æ ¼å´ç›¸å½“ä½ã€</li></ul><img src="https://pic.hanjiaming.com.cn/2021/04/07/00e40e65b1134.png" alt="image.png" title="image.png"><h2 id="replacement-policy" tabindex="-1"><a class="header-anchor" href="#replacement-policy" aria-hidden="true">#</a> Replacement Policy</h2><h3 id="lru-replacement" tabindex="-1"><a class="header-anchor" href="#lru-replacement" aria-hidden="true">#</a> LRU Replacement</h3><p>æœ€è¿‘æœ€å°‘ä½¿ç”¨</p><p>In the Least Recently Used (LRU) page replacement policy, the page that is used least recently will be replaced. Implementation: Add a register to every page frame - contain the last time that the page in that frame was accessed. Use a &quot;logical clock&quot; that advance by 1 tick each time a memory reference is made.ã€Œåœ¨æœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼ˆLRUï¼‰é¡µé¢æ›¿æ¢ç­–ç•¥ä¸­ï¼Œæœ€è¿‘æœ€å°‘ä½¿ç”¨çš„é¡µé¢å°†è¢«æ›¿æ¢ã€‚å®ç°ï¼šåœ¨æ¯ä¸ªé¡µé¢æ¡†æ¶ä¸­æ·»åŠ ä¸€ä¸ªå¯„å­˜å™¨-åŒ…å«æœ€åä¸€æ¬¡è®¿é—®è¯¥æ¡†æ¶ä¸­çš„é¡µé¢çš„æ—¶é—´ã€‚æ¯æ¬¡ä½¿ç”¨å†…å­˜å¼•ç”¨æ—¶ï¼Œè¯·ä½¿ç”¨æå‰1æ»´ç­”çš„â€œé€»è¾‘æ—¶é’Ÿâ€ã€‚ã€</p><h3 id="fifo-replacement" tabindex="-1"><a class="header-anchor" href="#fifo-replacement" aria-hidden="true">#</a> FIFO Replacement</h3><p>å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰</p><p>The cache is managed with the FIFO replacement policy: when all the 3 cache blocks are used up and a new data block will be loaded into cache, one data block out of the 3 blocks will be replaced out of the cache. The data block that was earliest loaded into the cache will be replaced. We assume that at the very beginning, the cache is empty.ã€Œé«˜é€Ÿç¼“å­˜é€šè¿‡FIFOæ›¿æ¢ç­–ç•¥è¿›è¡Œç®¡ç†ï¼šå½“3ä¸ªé«˜é€Ÿç¼“å­˜å—å…¨éƒ¨ç”¨å®Œå¹¶ä¸”æ–°æ•°æ®å—å°†è¢«åŠ è½½åˆ°é«˜é€Ÿç¼“å­˜ä¸­æ—¶ï¼Œè¿™3ä¸ªå—ä¸­çš„ä¸€ä¸ªæ•°æ®å—å°†ä»é«˜é€Ÿç¼“å­˜ä¸­æ›¿æ¢ã€‚æœ€æ—©åŠ è½½åˆ°ç¼“å­˜ä¸­çš„æ•°æ®å—å°†è¢«æ›¿æ¢ã€‚æˆ‘ä»¬å‡è®¾ä¸€å¼€å§‹ç¼“å­˜å°±ä¸ºç©ºã€‚ã€</p><p>ä½¿ç”¨æ­¤ç®—æ³•ï¼Œé«˜é€Ÿç¼“å­˜æŒ‰æ·»åŠ å—çš„é¡ºåºé€å‡ºè¯¥å—ï¼Œè€Œæ— éœ€è€ƒè™‘å®ƒä»¬ä¹‹å‰è¢«è®¿é—®è¿‡çš„é¢‘ç‡æˆ–æ¬¡æ•°ã€‚</p><h3 id="lifo-replacement" tabindex="-1"><a class="header-anchor" href="#lifo-replacement" aria-hidden="true">#</a> LIFO Replacement</h3><p>åè¿›å…ˆå‡ºï¼ˆLIFOï¼‰</p><p>ä½¿ç”¨æ­¤ç®—æ³•ï¼Œä¸FIFOé˜Ÿåˆ—çš„è¡Œä¸ºæ°å¥½ç›¸åã€‚é«˜é€Ÿç¼“å­˜é€å‡ºæœ€å…ˆæ·»åŠ çš„å—ï¼Œè€Œä¸ä¹‹å‰è®¿é—®å®ƒçš„é¢‘ç‡æˆ–æ¬¡æ•°æ— å…³ã€‚</p><!--]--></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/guomaimang/guomaimang.github.io/edit/main/src/note/cs/co/Memory/Introduction-to-Computer-Memory-and-Cache-Memory.md" rel="noopener noreferrer" target="_blank" arialabel="ç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" arialabelledby="edit"><title id="edit" lang="en">edit icon</title><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><span class="info">2022/3/25 00:43:37</span></div><div class="meta-item contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: 47519540+guomaimang@users.noreply.github.com">hanjiaming</span><!--]--><!--]--></div></footer><nav class="page-nav"><!----><a href="/note/cs/co/Memory/Internal-Memory.html" class="nav-link next" arialabel="Internal Memory"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow right"></span></div><div class="link">Internal Memory<!----></div></a></nav><div class="giscus-wrapper input-top" style="display:block;"><!----></div><!----></main><!--]--><footer class="footer-wrapper"><div class="footer">Legends never die.</div><div class="copyright">Copyright Â© 2022 HongShu</div></footer></div><!--]--><!----><!--[--><!-- Root element of PhotoSwipe. Must have class pswp. --><div class="pswp" tabindex="-1" role="dialog" aria-hidden="true"><!-- Background of PhotoSwipe. 
    Itâ€™s a separate element, as animating opacity is faster than rgba().--><div class="pswp__bg"></div><!-- Slides wrapper with overflow:hidden. --><div class="pswp__scroll-wrap"><!-- Container that holds slides. PhotoSwipe keeps only 3 slides in DOM to save memory. --><div class="pswp__container"><!-- donâ€™t modify these 3 pswp__item elements, data is added later on --><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. --><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><!--  Controls are self-explanatory. Order can be changed. --><div class="pswp__counter"></div><button class="pswp__button pswp__button--close" title="å…³é—­"></button><button class="pswp__button pswp__button--share" title="åˆ†äº«"></button><button class="pswp__button pswp__button--fs" title="åˆ‡æ¢å…¨å±"></button><button class="pswp__button pswp__button--zoom" title="ç¼©æ”¾"></button><!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR --><!-- element will get class pswp__preloader--active when preloader is running --><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div><button class="pswp__button pswp__button--arrow--left" title="ä¸Šä¸€ä¸ª (å·¦ç®­å¤´)"></button><button class="pswp__button pswp__button--arrow--right" title="ä¸‹ä¸€ä¸ª (å³ç®­å¤´)"></button><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div><!--]--><!--]--></div>
    <script type="module" src="/assets/app.e03d7337.js" defer></script>
  </body>
</html>
